

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Requirements &mdash; PODPAC 0.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  
    <link rel="canonical" href="https://creare-com.github.io/podpac-docsdeveloper/specs/nodes.html"/>
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/icon-outline.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../why-podpac.html">Why PODPAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../roadmap.html">Roadmap</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../user/coordinates.html">Coordinates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/nodes.html">Nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/pipelines.html">Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/earthdata.html">NASA Earth Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/api-min.html">API Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/api.html">API Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../design.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs.html">Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PODPAC</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Requirements</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/developer/specs/nodes.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="requirements">
<span id="requirements"></span><h1>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>Must provide an execution interface with consistent rules for outputs</li>
<li>Must provide a way of instantiating outputs following these rules</li>
<li>Provide methods to test if these rules are obeyed for child classes</li>
<li>Provide a consistent interface/rules for passing runtime parameters</li>
<li>Must provide an interface for finding available coordinates within a pipeline</li>
<li>Must provide an interface for caching and retrieving cached results</li>
<li>Must provide methods to inspect the complete pipeline and:<ul>
<li>Ouput json formatted text used to reproduce it</li>
<li>Report inconsistencies or inabilities to produce pipelines</li>
<li>Evaluate pipelines at a point with indications of where data came from (which nodes are active within compositors)</li>
</ul>
</li>
<li>Must give the same output if evaluated from a newly instantiated node, or previously instantiated and executed node</li>
<li>Must define public attributes that should be implemented/available to all nodes</li>
<li>Must define public parameters that should be implemented/available to all nodes</li>
<li>Potentially provide a mechanism to execute nodes in parallel or remotely on the cloud (This may be handled by an execution manager)</li>
<li>Could provide a method to estimate cost of executing a job over given coordinates using AWS cloud</li>
<li>Provide a standard methods for creators of child nodes to:<ul>
<li>Specify defaults for attributes and parameters</li>
<li>Specify defaults for input nodes</li>
<li>initialze the node without overwriting <strong>init</strong></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="example-use-cases">
<span id="example-use-cases"></span><h1>Example Use cases<a class="headerlink" href="#example-use-cases" title="Permalink to this headline">¶</a></h1>
<div class="section" id="typical">
<span id="typical"></span><h2>Typical<a class="headerlink" href="#typical" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The primary use case is essentially: A user executes nodes written by various authors with the same set of coordinates and the results can interact together using common mathematical operators (e.g. +-/*)</li>
<li>A users wants to retrieve all of the available times for a complex node pipeline in the native coordinates of the underlying datasets<ul>
<li>In this case, there may be multiple datasets spanning different times with different temporal resolutions</li>
</ul>
</li>
<li>After interactively creating a complex processing pipeline, a users wants to:<ul>
<li>share their work using the .json format</li>
<li>execute the node for a larger region using cloud-resources</li>
<li>inspect outputs from various stages of the algorithm to debug/analyze the results</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="advanced">
<span id="advanced"></span><h2>Advanced<a class="headerlink" href="#advanced" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Advanced users create new nodes to interface with custom data sources<ul>
<li>May specify cachining behaviour for expensive to calculate quantities such as indexes</li>
<li>May specify settings that should be saved as part of the user’s setting file</li>
<li>Should be able to test if node is properly implemented</li>
</ul>
</li>
<li>Advanced users create new nodes to implement custom algorithms (see Algorithm Node spec)</li>
<li>Advanced users create new nodes to composite various nodes together following custom rules (see Compositor Node spec)</li>
<li>Advanced users create new nodes to construct pipelines from custom json (see Pipeline Node spec)</li>
<li>Advanced users inspect results from an execution by examining the cached data quantities (see caching spec)</li>
</ul>
</div>
</div>
<div class="section" id="specification">
<span id="specification"></span><h1>Specification<a class="headerlink" href="#specification" title="Permalink to this headline">¶</a></h1>
<div class="section" id="user-interface">
<span id="user-interface"></span><h2>User Interface<a class="headerlink" href="#user-interface" title="Permalink to this headline">¶</a></h2>
<p>Starting from here for examples below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">traitlets</span> <span class="kn">as</span> <span class="nn">tl</span>
<span class="kn">from</span> <span class="nn">podpac.core.node</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="nn">podpac.core.coordinate</span> <span class="kn">import</span> <span class="n">Coordinate</span>
<span class="kn">from</span> <span class="nn">podpac.core.units</span> <span class="kn">import</span> <span class="n">UnitsDataArray</span><span class="p">,</span> <span class="n">ureg</span>
<span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="methods">
<span id="methods"></span><h3>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h3>
<div class="section" id="init">
<span id="init"></span><h4><strong>init</strong>(…)<a class="headerlink" href="#init" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Any attributes set at this stage are constant for all executions</li>
<li>Any parameters set at this stage are used as default parameters, but can be overwritten during execution. After execution, it reverts to the defaults</li>
</ul>
</div>
<div class="section" id="execute-coordinates-params-none-output-none-method-none-tempted-to-rename-to-evaluate-or-eval">
<span id="execute-coordinates-params-none-output-none-method-none-tempted-to-rename-to-evaluate-or-eval"></span><h4>execute(coordinates, params=None, output=None, method=None)  # Tempted to rename to evaluate or eval<a class="headerlink" href="#execute-coordinates-params-none-output-none-method-none-tempted-to-rename-to-evaluate-or-eval" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    coordinates : podpac.Coordinate</span>
<span class="sd">        The set of coordinates requested by a user. The Node will be executed using these coordinates.</span>
<span class="sd">    params : dict, optional</span>
<span class="sd">        Default is None. Runtime parameters that modify any default node parameters.</span>
<span class="sd">    output : podpac.UnitsDataArray, optional</span>
<span class="sd">        Default is None. Optional input array used to store the output data. When supplied, the node will not allocate its own memory for the output array. This array needs to have the correct dimensions and coordinates.</span>
<span class="sd">    method : str, optional</span>
<span class="sd">        Default is None. How the node will be executed: serial, parallel, on aws, locally, etc. Currently only local execution is supported.</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    --------</span>
<span class="sd">    podpac.core.units.UnitsDataArray</span>
<span class="sd">    </span>
<span class="sd">    Raises</span>
<span class="sd">    -------</span>
<span class="sd">    NotImplementedError: Base class raises this because the interface needs to be implemented by children.</span>
<span class="sd">    CoordinateError: If Node contains a dimension not present in the requsted coordinates</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>**Notes on what’s returned: **</p>
<ul>
<li><p class="first">This function should always return a <code class="docutils literal notranslate"><span class="pre">UnitsDataArray</span></code> object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">native_coordinates</span> <span class="o">=</span> <span class="n">Coordinate</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">),</span> <span class="n">lon</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mf">2.</span><span class="p">),</span> <span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">initialize_output_array</span><span class="p">())</span>
<span class="go">podpac.core.units.UnitsDataArray</span>
</pre></div>
</div>
</li>
<li><p class="first">This <code class="docutils literal notranslate"><span class="pre">UnitsDataArray</span></code> may contain the following dimensions <code class="docutils literal notranslate"><span class="pre">['lat',</span> <span class="pre">'lon',</span> <span class="pre">'time',</span> <span class="pre">'alt']</span></code></p>
</li>
<li><p class="first">For cases with multiple outputs, it may additionally contain the field <code class="docutils literal notranslate"><span class="pre">band</span></code></p>
<ul class="simple">
<li>This is to supported datasets such as multi-spectral imagery</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">grey</span> <span class="o">=</span> <span class="n">UnitsDataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span> <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">],</span> <span class="n">coords</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rgba</span> <span class="o">=</span> <span class="n">UnitsDataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span> <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="s1">&#39;band&#39;</span><span class="p">],</span>                                               <span class="n">coords</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grey</span> <span class="o">+</span> <span class="n">rgba</span>
<span class="go">&lt;xarray.UnitsDataArray (lat: 2, lon: 1, band: 4)&gt;</span>
<span class="go">array([[[2., 2., 2., 2.]],</span>

<span class="go">       [[2., 2., 2., 2.]]])</span>
<span class="go">Coordinates:</span>
<span class="go">  * lat      (lat) int32 0 1</span>
<span class="go">  * lon      (lon) int32 0</span>
<span class="go">  * band    (band) &lt;U1 &#39;r&#39; &#39;g&#39; &#39;b&#39; &#39;a&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li>This requres that all the bands have the same <code class="docutils literal notranslate"><span class="pre">units</span></code></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">grey</span> <span class="o">=</span> <span class="n">UnitsDataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span> <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">],</span>
<span class="go">                          coords=[[0, 1], [0]], attrs={&#39;units&#39;: ureg.m})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rgba1</span> <span class="o">=</span> <span class="n">UnitsDataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span> <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="s1">&#39;band&#39;</span><span class="p">],</span>
<span class="go">                          coords=[[0, 1], [0], [&#39;r&#39;, &#39;g&#39;, &#39;b&#39;, &#39;a&#39;]],</span>
<span class="go">                          attrs={&#39;units&#39;: ureg.km})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grey</span> <span class="o">+</span> <span class="n">rgba1</span>
<span class="go">&lt;xarray.UnitsDataArray (lat: 2, lon: 1, band: 4)&gt;</span>
<span class="go">array([[[1001., 1001., 1001., 1001.]],</span>

<span class="go">       [[1001., 1001., 1001., 1001.]]])</span>
<span class="go">Coordinates:</span>
<span class="go">  * lat      (lat) int32 0 1</span>
<span class="go">  * lon      (lon) int32 0</span>
<span class="go">  * band    (band) &lt;U1 &#39;r&#39; &#39;g&#39; &#39;b&#39; &#39;a&#39;</span>
<span class="go">Attributes:</span>
<span class="go">    units:    meter</span>
</pre></div>
</div>
<ul class="simple">
<li>[<strong>FUTURE FEATURE</strong>] We could support different units for differents bands as follows, but the dimensionality still has to be consistent, unless a specific band is selected</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rgba2</span> <span class="o">=</span> <span class="n">UnitsDataArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span> <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="s1">&#39;band&#39;</span><span class="p">],</span>
<span class="go">                          coords=[[0, 1], [0], [&#39;r&#39;, &#39;g&#39;, &#39;b&#39;, &#39;a&#39;]],</span>
<span class="go">                          attrs={&#39;units&#39;: {&#39;r&#39;: ureg.m, &#39;g&#39;: ureg.ft,</span>
<span class="go">                                          &#39;b&#39;: ureg.km, &#39;a&#39;: ureg.mile}})</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">grey</span> <span class="o">+</span> <span class="n">rgba2</span>
<span class="go">&lt;xarray.UnitsDataArray (lat: 2, lon: 1, band: 4)&gt;</span>
<span class="go">array([[[2., 1.3048, 1001., 1610.344]],</span>

<span class="go">       [[2., 1.3048, 1001., 1610.344]]])</span>
<span class="go">Coordinates:</span>
<span class="go">  * lat      (lat) int32 0 1</span>
<span class="go">  * lon      (lon) int32 0</span>
<span class="go">  * band    (band) &lt;U1 &#39;r&#39; &#39;g&#39; &#39;b&#39; &#39;a&#39;</span>
<span class="go">Attributes:</span>
<span class="go">    units:    {&#39;r&#39;: &lt;Unit(&#39;meter&#39;)&gt;, &#39;g&#39;: &lt;Unit(&#39;foot&#39;)&gt;, &#39;b&#39;: &lt;Unit(&#39;kilomet...</span>
</pre></div>
</div>
</li>
<li><p class="first">Dimensions should be returned in the order of the requested <code class="docutils literal notranslate"><span class="pre">coordinates</span></code></p>
<ul class="simple">
<li>eg. if underlying dataset has <code class="docutils literal notranslate"><span class="pre">['lat',</span> <span class="pre">'lon']</span></code> <code class="docutils literal notranslate"><span class="pre">coordinates</span></code>, but the request has <code class="docutils literal notranslate"><span class="pre">['lon',</span> <span class="pre">'lat']</span></code> coordinates, the output should match <code class="docutils literal notranslate"><span class="pre">['lon',</span> <span class="pre">'lat']</span></code></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">native_coordinates</span> <span class="o">=</span> <span class="n">Coordinate</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">),</span> <span class="n">lon</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mf">2.</span><span class="p">),</span> <span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">evaluated_coordinates</span> <span class="o">=</span> <span class="n">Coordinate</span><span class="p">(</span><span class="n">lon</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mf">4.</span><span class="p">),</span> <span class="n">lat</span><span class="o">=</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.</span><span class="p">),</span> <span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="s1">&#39;lat&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">initialize_output_array</span><span class="p">()</span><span class="o">.</span><span class="n">dims</span>
<span class="go">(&#39;lon&#39;, &#39;lat&#39;)</span>
</pre></div>
</div>
</li>
<li><p class="first">If the underlying Node has dimensions not in the request, an exception is raised</p>
<ul class="simple">
<li>eg. Node has <code class="docutils literal notranslate"><span class="pre">['lat',</span> <span class="pre">'lon',</span> <span class="pre">'time']</span></code> dimensions, but coordinates only have <code class="docutils literal notranslate"><span class="pre">['time']</span></code></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">native_coordinates</span> <span class="o">=</span> <span class="n">Coordinate</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">),</span> <span class="n">lon</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mf">2.</span><span class="p">),</span> <span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">evaluated_coordinates</span> <span class="o">=</span> <span class="n">Coordinate</span><span class="p">(</span><span class="n">lon</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mf">4.</span><span class="p">),)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">initialize_output_array</span><span class="p">()</span>
<span class="go">CoordinateError: &#39;Dimension &quot;lat&quot; not present in requested coordinates with dims [&quot;lon&quot;]&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li>Because some datasets may be huge, and without information about the subset, the safest behaviour is to throw an exception</li>
</ul>
</li>
<li><p class="first">If the underlying Node does not have dimensions present in the request, just return without those dimensions</p>
<ul class="simple">
<li>eg. Node has <code class="docutils literal notranslate"><span class="pre">['lat',</span> <span class="pre">'lon']</span></code> dimensions, but evaluated coordinates have <code class="docutils literal notranslate"><span class="pre">['time',</span> <span class="pre">'lon',</span> <span class="pre">'lat']</span></code> then <code class="docutils literal notranslate"><span class="pre">UnitsDataArray</span></code> will have dimensions <code class="docutils literal notranslate"><span class="pre">['lon',</span> <span class="pre">'lat']</span></code></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">native_coordinates</span> <span class="o">=</span> <span class="n">Coordinate</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">lon</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">evaluated_coordinates</span> <span class="o">=</span> <span class="n">Coordinate</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">lon</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="s1">&#39;2018-01-01&#39;</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="s1">&#39;time&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">initialize_output_array</span><span class="p">()</span>
<span class="go">&lt;xarray.UnitsDataArray (lat: 1, lon: 1)&gt;</span>
<span class="go">array([[nan]])</span>
<span class="go">Coordinates:</span>
<span class="go">  * lat      (lat) float64 45.0</span>
<span class="go">  * lon      (lon) float64 0.0</span>
</pre></div>
</div>
</li>
<li><p class="first">[<strong>???FUTURE FEATURE???</strong>] If <code class="docutils literal notranslate"><span class="pre">isinstance(coordinates,</span> <span class="pre">GroupCoordinates)</span></code> then a <code class="docutils literal notranslate"><span class="pre">UnitsDataArray</span></code> with a single <code class="docutils literal notranslate"><span class="pre">group</span></code> dimension is return. Each <code class="docutils literal notranslate"><span class="pre">group</span></code> is indexed by the the coordinates group in <code class="docutils literal notranslate"><span class="pre">GroupCoordinates</span></code>, and contains a <code class="docutils literal notranslate"><span class="pre">UnitsDataArray</span></code> that matches the above rules.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">podpac.core.coordinate</span> <span class="kn">import</span> <span class="n">GroupCoordinate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">native_coordinates</span> <span class="o">=</span> <span class="n">Coordinate</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">),</span> <span class="n">lon</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mf">2.</span><span class="p">),</span> <span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span><span class="o">.</span><span class="n">evaluated_coordinates</span> <span class="o">=</span> <span class="n">GroupCoordinate</span><span class="p">([</span><span class="n">Coordinate</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">),</span> <span class="n">lon</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">2.</span><span class="p">),</span> <span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">]),</span> <span class="n">Coordinate</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.</span><span class="p">),</span> <span class="n">lon</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mf">4.</span><span class="p">),</span> <span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">])])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">initialize_output_array</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">o</span><span class="p">;</span> <span class="n">o</span> <span class="o">+</span> <span class="n">o</span>  <span class="c1"># This all works fine</span>
<span class="go">&lt;xarray.UnitsDataArray (group: 2)&gt;</span>
<span class="go">array([&lt;xarray.UnitsDataArray (lat: 91, lon: 91)&gt;</span>
<span class="go">array([[nan, nan, nan, ..., nan, nan, nan],</span>
<span class="go">       ...,</span>
<span class="go">       [nan, nan, nan, ..., nan, nan, nan]])</span>
<span class="go">Coordinates:</span>
<span class="go">  * lat      (lat) float64 90.0 89.0 88.0 87.0 86.0 85.0 84.0 83.0 82.0 81.0 ...</span>
<span class="go">  * lon      (lon) float64 -180.0 -178.0 -176.0 -174.0 -172.0 -170.0 -168.0 ...</span>
<span class="go">Attributes:</span>
<span class="go">    layer_style:  &lt;podpac.core.node.Style object at 0x0000022DEE17AB38&gt;</span>
<span class="go">    params:       {},</span>
<span class="go">       &lt;xarray.UnitsDataArray (lat: 46, lon: 46)&gt;</span>
<span class="go">array([[nan, nan, nan, ..., nan, nan, nan],</span>
<span class="go">       ...,</span>
<span class="go">       [nan, nan, nan, ..., nan, nan, nan]])</span>
<span class="go">Coordinates:</span>
<span class="go">  * lat      (lat) float64 0.0 -2.0 -4.0 -6.0 -8.0 -10.0 -12.0 -14.0 -16.0 ...</span>
<span class="go">  * lon      (lon) float64 0.0 4.0 8.0 12.0 16.0 20.0 24.0 28.0 32.0 36.0 ...</span>
<span class="go">Attributes:</span>
<span class="go">    layer_style:  &lt;podpac.core.node.Style object at 0x0000022DEE17AB38&gt;</span>
<span class="go">    params:       {}], dtype=object)</span>
<span class="go">Coordinates:</span>
<span class="go">  * group    (group) &lt;U144 &#39;Coordinate\n\tlat: UniformCoord: Bounds[-90.0, 0.0], N[46], ctype[&quot;segment&quot;]\n\tlon: UniformCoord: Bounds[-180.0, 0.0], N[46], ctype[&quot;segment&quot;]&#39; ...    </span>
</pre></div>
</div>
<ul class="simple">
<li>This will break any node that uses <code class="docutils literal notranslate"><span class="pre">o.data</span></code>…</li>
<li>Alternatively, we could disallow execution of <code class="docutils literal notranslate"><span class="pre">GroupCoordinates</span></code> – raising an exception<ul>
<li>This leaves it up to the user to loop through all the coordinates in <code class="docutils literal notranslate"><span class="pre">GroupCoordinates</span></code> and execute the node that way</li>
<li>Perhaps we can do that? In that case only the bottom node returns the <code class="docutils literal notranslate"><span class="pre">group</span></code> dataarray, and anything internal should be fine</li>
<li>This will break if an internal node uses a group coordinate as part of the pipeline</li>
<li>Safest is just to disallow this behaviour…</li>
</ul>
</li>
<li>Alternatively (Currently the favorite): WE could raise an exception, and provide a execute_group method that will do the looping for the user. This avoids any group coordinates executed within the pipeline, but still let’s a user evaluate a group in a consistent manner.</li>
</ul>
</li>
<li><p class="first">The output will contain metadata on the:</p>
<ul class="simple">
<li>Units</li>
<li>Styling?</li>
<li>Parameters used for execution</li>
<li>Other metadata to track provenance?</li>
</ul>
</li>
</ul>
<p>**Notes on parameters: **</p>
<ul>
<li><p class="first">Nodes can implement default values for parameters</p>
</li>
<li><p class="first">These can be overwritten at runitime</p>
</li>
<li><p class="first">If a parameter is specified in the call, but not present in the node, a warning is raised</p>
<ul class="simple">
<li>The settings file could have an option to escalate this to an Exception</li>
</ul>
</li>
<li><p class="first">A parameter can be passed down to inputs of a node pipeline by referencing it’s with it’s own dictionary</p>
<ul class="simple">
<li>Eg.</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">podpac.core.algorithm.algorithm</span> <span class="kn">import</span> <span class="n">Algorithm</span>
<span class="k">class</span> <span class="nc">MyNode</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
    <span class="n">my_param</span> <span class="o">=</span> <span class="n">tl</span><span class="o">.</span><span class="n">Int</span><span class="p">(</span><span class="n">default_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">tag</span><span class="p">(</span><span class="n">param</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="nb">input</span> <span class="o">=</span> <span class="n">tl</span><span class="o">.</span><span class="n">Instance</span><span class="p">(</span><span class="n">Node</span><span class="p">,</span> <span class="n">allow_none</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">algorithm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialize_output_array</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">input</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">output</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">_params</span><span class="p">[</span><span class="s1">&#39;my_param&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="p">[</span><span class="s1">&#39;my_param&#39;</span><span class="p">]</span>
            <span class="c1"># TODO: Should refactor so that the following is possible</span>
            <span class="c1"># output[0] = self.input.my_param + self.my_param</span>
        <span class="k">return</span> <span class="n">output</span>
<span class="n">my_node</span> <span class="o">=</span> <span class="n">MyNode</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="n">MyNode</span><span class="p">(</span><span class="n">my_param</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_node</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">Coordinate</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">data</span>
<span class="go">array([1.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_node</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">Coordinate</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;my_param&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span><span class="o">.</span><span class="n">data</span>
<span class="go">array([3.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_node</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">Coordinate</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;input&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;my_param&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}})</span><span class="o">.</span><span class="n">data</span>
<span class="go">array([5.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_node</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">Coordinate</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;my_param&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;input&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;my_param&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}})</span><span class="o">.</span><span class="n">data</span>
<span class="go">array([7.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_node</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">Coordinate</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">data</span>
<span class="go">array([1.])</span>
</pre></div>
</div>
<ul class="simple">
<li>Note, the default or instantiated parameters are not overwritten by subsequent executes</li>
</ul>
</li>
<li><p class="first">We could also suppored paths such as the following, where both are equivalent:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;input.my_param&#39;</span><span class="o">=</span><span class="mi">1</span><span class="p">}</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;input&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;my_param&#39;</span><span class="o">=</span><span class="mi">1</span><span class="p">}}</span>
</pre></div>
</div>
</li>
<li><p class="first">The special key <code class="docutils literal notranslate"><span class="pre">'*'</span></code> could be reserved for passing a parameter to ALL nodes in the pipeline, unless overwritten by a specific node.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;*&#39;</span><span class="p">:</span> <span class="p">{</span><span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">},</span> <span class="s1">&#39;input.interpolation&#39;</span><span class="o">=</span><span class="s1">&#39;bilinear&#39;</span><span class="p">},</span> 
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="find-coordinates">
<span id="find-coordinates"></span><h4>find_coordinates<a class="headerlink" href="#find-coordinates" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">find_coordinates</span><span class="p">(</span><span class="n">dims</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">sortby</span><span class="o">=</span><span class="s1">&#39;size&#39;</span><span class="p">,</span> <span class="n">stop_types</span><span class="o">=</span><span class="p">[</span><span class="n">Compositor</span><span class="p">,</span> <span class="n">DataSource</span><span class="p">]):</span>
    <span class="sd">&#39;&#39;&#39;This is a helper function to get all the native coordinates within a pipeline, sorted by</span>
<span class="sd">       the largest extents, or highest resolution</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    dims : str/list, optional</span>
<span class="sd">        The dimension or set of dimensions for which the user wants to find the underlying dataset coordinates. If None, all available dimensions for underlying coordinates will be found. Stacked dimensions cannot be used (or are automatically unstacked)</span>
<span class="sd">    bounds : dict, optional</span>
<span class="sd">        Default is None, in which case search is not restricted to a bounding window. Bound within which to search for coordinates. Format should be {&#39;dim&#39;: (start, end)}</span>
<span class="sd">    number : int, optional</span>
<span class="sd">        Default is None, in which case all coordinates found are returned. Otherwise, only the first `number` of coordinates are returned, based on the `sortby` specified. If number is &lt;0, the the last `number` of coordinates are returned. </span>
<span class="sd">    sortby : str, optional</span>
<span class="sd">        Default is &#39;size&#39;. `sortby` should be in [&#39;size&#39;, &#39;extents&#39;]. If &#39;size&#39;, the returned coordinates are sorted by the number of coordinates in the dimension, with the largest first. If &#39;extents&#39;, the returned coordinates are sorted by the largest geographical extent. In case of ties, the sorting looks at the other option to break the tie. </span>
<span class="sd">    stop_type : list, optional</span>
<span class="sd">        List of node types where search should be stopped. By default, searches stop at DataSource and Compositor nodes. Remove the compositor node to search for native coordinates of individual files, but this may take a long time.</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    --------</span>
<span class="sd">    OrderedDict:</span>
<span class="sd">        Format is as follows: {dims[0]: {&#39;node_address0&#39;: Coordinate1D,</span>
<span class="sd">                                         &#39;node_address1&#39;: Coordinate1D, ...},</span>
<span class="sd">                               dims[1]: {&#39;node_address2&#39;: Coordinate1D,</span>
<span class="sd">                                         &#39;node_address0&#39;: Coordinate1D, ...}}</span>
<span class="sd">       where find_coordinates(dims)[dims[0]].items() are sorted as specified</span>

<span class="sd">    Notes</span>
<span class="sd">    ------</span>
<span class="sd">    The `native_coordinates` could be retrieved using (for example):</span>
<span class="sd">    &gt;&gt;&gt; c = node.find_coordinates(&#39;time&#39;)</span>
<span class="sd">    &gt;&gt;&gt; node_key = list(c[&#39;time&#39;].keys())[0]</span>
<span class="sd">    &gt;&gt;&gt; node[node_key].native_coordinates</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="section" id="get-item-self">
<span id="get-item-self"></span><h4><strong>get_item</strong>(self, …)<a class="headerlink" href="#get-item-self" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">__get__item__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
    <span class="sd">&#39;&#39;&#39; Returns any slice of the data for the last execution</span>
<span class="sd">    Paramters</span>
<span class="sd">    ----------</span>
<span class="sd">    key : slice, np.ndarray, dict, list, str</span>
<span class="sd">        * If isinstance (key, [slice, np.ndarray, dict, list]), then the keys gets passed down to the last output of the node output[key].</span>
<span class="sd">        * If isinstance(key, str) then the string points to a path node pipeline, and the data for that node for the last execution is returned (Calls `get` function with execute=True)</span>

<span class="sd">    Returns</span>
<span class="sd">    --------</span>
<span class="sd">    UnitsDataArray </span>
<span class="sd">        The data from the most recent execution</span>

<span class="sd">    &#39;&#39;&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="get-self-str-coordinates-params-execute-false">
<span id="get-self-str-coordinates-params-execute-false"></span><h4>get(self, str, coordinates, params, execute=False)<a class="headerlink" href="#get-self-str-coordinates-params-execute-false" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">execute</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Retrieves execution results from the node</span>
<span class="sd">    Parameters</span>
<span class="sd">    ------------</span>
<span class="sd">    key : str</span>
<span class="sd">       Path to the cached object (within the node pipeline). If empty or &#39;.&#39;, returns data for the current node.</span>
<span class="sd">    coordinates: Coordinate </span>
<span class="sd">        Coordinates for which cached data should be retrieved</span>
<span class="sd">    params : dict</span>
<span class="sd">        Parameters used to execute the node for which data should be retrieved. These parameters should be relative to the current node from which get is called. E.g. key = .input.source, to set a param on source, use params={&#39;input.source.param&#39;=&lt;value&gt;}</span>
<span class="sd">    execute : bool, optional</span>
<span class="sd">        Default is False. If True, will execute the node to retrieve data if the data is not within the cache. Otherwise, will raise an exception if data is not in the cache</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    UnitsDataArray </span>
<span class="sd">        The cached data from the requested coordinates/params</span>
<span class="sd">    </span>
<span class="sd">    Raises</span>
<span class="sd">    -------</span>
<span class="sd">    CacheError</span>
<span class="sd">        If the data is not in the cache and execute == False</span>
<span class="sd">    &#39;&#39;&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li>This is VERY similar to the execute method… in fact, execute probably calls this function for the caching.</li>
</ul>
</div>
</div>
<div class="section" id="definition">
<span id="definition"></span><h3>definition<a class="headerlink" href="#definition" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">definition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;dict&#39;</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Returns the pipeline node definition in the desired format</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    type: str, optional</span>
<span class="sd">        Default is &#39;dict&#39;, which returns a dictionary definition of the pipeline. </span>
<span class="sd">        &#39;json&#39;: returns a json-formatted text string of the pipeline</span>
<span class="sd">        &#39;rich&#39;: returns a javascript widget &lt;-- should this be &#39;widget&#39; instead? </span>
<span class="sd">        &#39;node&#39;: Returns a PipelineNode instance of this object</span>
<span class="sd">    </span>
<span class="sd">    Returns</span>
<span class="sd">    --------</span>
<span class="sd">    various</span>
<span class="sd">        Depends on type, see above. </span>
<span class="sd">    &#39;&#39;&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li>There are a few shortcut properties that call this function<ul>
<li><code class="docutils literal notranslate"><span class="pre">pipeline_json</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">pipeline_rich</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">pipeline_dict</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">pipeline_node</span></code></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="developer-interface">
<span id="developer-interface"></span><h2>Developer interface<a class="headerlink" href="#developer-interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="public-attributes">
<span id="public-attributes"></span><h3>Public Attributes<a class="headerlink" href="#public-attributes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">native_coordinates</span></code>: Underlying data source coordiantes, when available</li>
<li><code class="docutils literal notranslate"><span class="pre">evaluated_coordinates</span></code>: Coordinated used for evaluating the node</li>
<li><code class="docutils literal notranslate"><span class="pre">output_coordinates</span></code>: Coordinates present in the output from the node</li>
<li><code class="docutils literal notranslate"><span class="pre">units</span></code>: Units associated with the output of this node</li>
<li><code class="docutils literal notranslate"><span class="pre">interpolation</span></code>: Interpolation method used with this node</li>
</ul>
</div>
<div class="section" id="private-attributes">
<span id="private-attributes"></span><h3>Private Attributes<a class="headerlink" href="#private-attributes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">_output</span></code>: Copy of last output from this node</li>
<li><code class="docutils literal notranslate"><span class="pre">_params</span></code>: Copy of initialized/default parameters for this node</li>
</ul>
</div>
<div class="section" id="additional-public-methods">
<span id="additional-public-methods"></span><h3>Additional public methods<a class="headerlink" href="#additional-public-methods" title="Permalink to this headline">¶</a></h3>
<p>( Some of these are already documented in the code )</p>
<ul class="simple">
<li>cache_obj: Used to cache an object</li>
<li>cache_path: file where object is cached</li>
<li>cache_dir: directory where objects are cached</li>
<li>clear_disk_cache: utility used to clear cache for this node</li>
<li>init: Used for initialization of derived classes</li>
<li>_first_init: Used to do any initialization before any of the core initialization is done</li>
<li>initialize_array</li>
<li>initialize_coord_array</li>
<li>initialize_output_array</li>
<li>get_cached_object: similar go ‘get’, but specifies a particular filename? Maybe superceded by caching refactor?</li>
<li>save_to_disk?</li>
</ul>
</div>
<div class="section" id="testing">
<span id="testing"></span><h3>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>I think testing should live in the common_test_utils. I.e. separate from this node.</li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2018, Creare.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>