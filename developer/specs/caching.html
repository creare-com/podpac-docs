

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Requirements &mdash; PODPAC 0.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  
    <link rel="canonical" href="https://creare-com.github.io/podpac-docsdeveloper/specs/caching.html"/>
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/icon-outline.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../why-podpac.html">Why PODPAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../roadmap.html">Roadmap</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../user/coordinates.html">Coordinates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/nodes.html">Nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/pipelines.html">Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/earthdata.html">NASA Earth Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/api-min.html">API Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/api.html">API Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../design.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs.html">Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PODPAC</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Requirements</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/developer/specs/caching.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="requirements">
<span id="requirements"></span><h1>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>Support storing results of calculations<ul>
<li>This includes:<ul>
<li>? numpy arrays</li>
<li>xarrays</li>
<li>UnitsDataArray</li>
<li>? DataSource</li>
<li>? other serialized binary data<ul>
<li>GeoTIFFs</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Cached queries are idempotent with respect to some set of parameters that define the query (location/datetime, datasource, paramters used to compute a prediction).</li>
<li>ability to retrieve calculated data from a pipeline after execution in an interactive shell for debugging or analysis purposes</li>
<li>Support different storage mediums<ul>
<li>This includes:<ul>
<li>RAM</li>
<li>local disk (HDD/SSD)</li>
<li>AWS s3</li>
<li>? Databases (MongoDB supports geospatial queries and binary data)</li>
<li>? HDFS file system</li>
</ul>
</li>
</ul>
</li>
<li>Support resource limitations<ul>
<li>This includes:<ul>
<li>Total number of bytes cached in RAM/disk/s3 across a process running podpac</li>
<li>Total number of bytes cached in RAM/disk/s3 across multiple processes on the same computer/server running podpac</li>
<li>Total number of bytes cached in RAM/disk/s3 across a cluster of servers running podpac</li>
</ul>
</li>
</ul>
</li>
<li>Support prioritization of cached data under resource limitations<ul>
<li>Bassed on:<ul>
<li>size of data (bytes)</li>
<li>computational cost to reproduce (time to compute)</li>
<li>access patterns:<ul>
<li>frequency of use</li>
<li>recency of use</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Support expiration of data (e.g. forecast data that is updated at some time interval)</li>
<li>Support cache tiers:<ul>
<li>respond from “better” tier when possible (e.g. RAM)</li>
<li>fall back on “worse” tier (e.g. local disk then s3 or some other networked storage)</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="example-use-cases">
<span id="example-use-cases"></span><h1>Example Use cases<a class="headerlink" href="#example-use-cases" title="Permalink to this headline">¶</a></h1>
<ol class="simple">
<li>SMAP data retrieved from NASA servers while serving a request is stored on local disk for future requests.</li>
<li>Server that uses podpac to handle requests for data that involves complex computations using forecast data (e.g. weather predictions) as an input. Multiple processes are used to load-balance handling of requests. The same calculation should ideally not be performed by more than one of these processes. However, this could be subject to available RAM. In addition, results of calculations bassed on forecast data should be redone when updated forecast data becomes available.</li>
<li>Server like above, but requests are handled by a “serverless” technology like AWS lambda. Intermediate results are cached in a network storage like AWS s3 (or sharded MongoDB cluster, or HDFS filesystem).</li>
<li>TODO: Add example usecases</li>
</ol>
</div>
<div class="section" id="specification">
<span id="specification"></span><h1>Specification<a class="headerlink" href="#specification" title="Permalink to this headline">¶</a></h1>
<div class="section" id="user-interface">
<span id="user-interface"></span><h2>User Interface<a class="headerlink" href="#user-interface" title="Permalink to this headline">¶</a></h2>
<p>TODO: Add user interface specs</p>
</div>
<div class="section" id="developer-interface">
<span id="developer-interface"></span><h2>Developer interface<a class="headerlink" href="#developer-interface" title="Permalink to this headline">¶</a></h2>
<p>TODO: Add developer interface specs</p>
</div>
</div>
<div class="section" id="implementation-notes">
<span id="implementation-notes"></span><h1>Implementation Notes<a class="headerlink" href="#implementation-notes" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>Idempotence can be supported using key computed via some hashing protocol. Maybe the key is the hash of a dictionary representing parameter key/values and there is some specification on the keys like the time parameter is always “datetime”.</li>
<li>Keys used to retrieve data need to support a distributed system. Basically, cache system needs to know, or be able to figure out, what server to make a request to when data is cached over some kind of network storage system (multiple s3 buckets, sharded database, HDFS).<ul>
<li>This can be accomplished by:<ul>
<li>reserving a portion of a retrieval key (hash) to specify the network resource<ul>
<li>could be hard to change the “key” for a particular network resource after the fact.</li>
<li>likely need to support adding (maybe deleting) network resources over time.</li>
</ul>
</li>
<li>Using a centralized lookup server<ul>
<li>central server could be bottleneck</li>
<li>retrieval becomes at least two network bassed queries (one to central server, and then one for data).</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2018, Creare.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>