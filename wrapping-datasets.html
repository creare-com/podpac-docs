<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>&lt;no title&gt; &mdash; 3.2.0+1.g44ea00f8</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.png"/>
    <link rel="canonical" href="https://podpac.orgwrapping-datasets.html"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="&lt;no title&gt;" href="references.html" />
    <link rel="prev" title="podpac.version.VERSION_INFO" href="api/podpac.version.VERSION_INFO.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/icon.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="settings.html">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings.html#id18">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings.html#id71">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings.html#id92">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="design.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="nodes.html">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="nodes.html#id10">]</a></li>
<li class="toctree-l1"><a class="reference internal" href="nodes.html#id19">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="nodes.html#id22">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="nodes.html#id25">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolation.html">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolation.html#id10">]</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolation.html#id15">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolation.html#id20">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolation.html#id25">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolation.html#id30">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolation.html#id35">]</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PODPAC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">&lt;no title&gt;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/wrapping-datasets.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p># Wrapping Datasets</p>
<p>Wrapping a new dataset is challenging because you have to understand all of the quirks of the new dataset and deal with the quirks of PODPAC as well. This reference is meant to record a few rules of thumb when wrapping new datasets to help you deal with the latter.</p>
<p>## Rules
1. When evaluating a node with a set of coordinates:</p>
<blockquote>
<div><p>1. The evaluation coordinates must include ALL of the dimensions present in the source dataset
1. The evaluation coordinates MAY contain additional dimensions NOT present in the source dataset, and the source may ignore these</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>When returning data from a data source node:
1. The ORDER of the evaluation coordinates MUST be preserved (see <cite>UnitsDataArray.part_transpose</cite>)
1. Any multi-channel data must be returned using the <cite>output</cite> dimension which is ALWAYS the LAST dimension</p></li>
<li><p>Nodes should be <strong>lightweight</strong> to instantiate and users should expect <em>fail on eval</em>. Easy checks should be performed on initialization, but anything expensive should be delayed.</p></li>
</ol>
<p>## Guide
In theory, to wrap a new <cite>DataSource</cite>:
1. Create a new class that inherits from <cite>podpac.core.data.DataSource</cite> or a derived class (see the <cite>podpac.core.data</cite> module for generic data readers).
2. Implement a method for opening/accessing the data, or use an existing generic data node and hard-code certain attributes
3. Implement the <cite>get_coordinates(self)</cite> method
4. Implement the <cite>get_data(self, coordinates, coordinates_index)</cite> method</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><cite>coordinates</cite> is a <cite>podpac.Coordinates</cite> object and itâ€™s in the same coordinate system as the data source (i.e. a subset of what comes out of <cite>get_coordinates</cite>)</p></li>
<li><p><cite>coordinates_index</cite> is a list (or tuple?) of slices or boolean arrays or index arrays to indexes into the output of <cite>get_coordinates()</cite> to produce <cite>coordinates</cite> that come into this function.</p></li>
</ol>
</div></blockquote>
<p>In practice, the real trick is implementing a compositor to put multiple tiles together to look like a single <cite>DataSource</cite>. We tend to use the <cite>podpac.compositor.OrderedCompositor</cite> node for this task, but it does not handle interpolation between tiles. Instead, see the <cite>podpac.core.compositor.tile_compositor</cite> module.</p>
<p>When using compositors, it is prefered the that <cite>sources</cite> attribute is populated at instantiation, but on-the-fly (i.e. at eval) population of sources is also acceptible and sometimes necessary for certain datasources.</p>
<p>For examples, check the <cite>podpac.datalib</cite> module.</p>
<p>Happy wrapping!</p>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="api/podpac.version.VERSION_INFO.html" class="btn btn-neutral float-left" title="podpac.version.VERSION_INFO" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="references.html" class="btn btn-neutral float-right" title="&lt;no title&gt;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2023, Creare.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>